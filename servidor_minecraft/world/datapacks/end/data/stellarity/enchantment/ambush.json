{
	"description": {
		"translate": "enchantment.stellarity.ambush",
		"fallback": "Ambush"
	},
	"supported_items": "#minecraft:enchantable/sharp_weapon",
	"primary_items": "#minecraft:enchantable/sword",
	"weight": 5,
	"max_level": 3,
	"min_cost": {
		"base": 12,
		"per_level_above_first": 17
	},
	"max_cost": {
		"base": 28,
		"per_level_above_first": 17
	},
	"anvil_cost": 2,
	"slots": [
		"mainhand"
	],
	"effects": {
		"minecraft:damage": [
			{
				"effect": {
					"type": "minecraft:multiply",
					"factor": {
						"type": "minecraft:linear",
						"base": 1.5,
						"per_level_above_first": 0.5
					}
				},
				"requirements": {
					"condition": "minecraft:all_of",
					"terms": [
						{
							"condition": "minecraft:inverted",
							"term": {
								"condition": "minecraft:entity_properties",
								"entity": "this",
								"predicate": {
									"nbt": "{NoAI:1b}"
								}
							}
						},
						{
							"condition": "minecraft:inverted",
							"term": {
								"condition": "minecraft:entity_properties",
								"entity": "this",
								"predicate": {
									"type": "minecraft:player"
								}
							}
						},
						{
							"condition": "minecraft:inverted",
							"term": {
								"condition": "minecraft:entity_properties",
								"entity": "this",
								"predicate": {
									"type": "#kohara:invalid_targets"
								}
							}
						},
						{
							"condition": "minecraft:inverted",
							"term": {
								"condition": "minecraft:entity_properties",
								"entity": "this",
								"predicate": {
									"targeted_entity": {
										"type": "minecraft:player"
									}
								}
							}
						}
					]
				}
				
			}
		],
		"minecraft:post_attack": [
			{
				"enchanted": "attacker",
				"affected": "victim",
				"effect": {
					"type": "minecraft:all_of",
					"effects": [
						{
							"type": "minecraft:spawn_particles",
							"particle": {
								"type": "minecraft:trial_spawner_detection"
							},
							"horizontal_position": {
								"type": "in_bounding_box"
							},
							"vertical_position": {
								"type": "in_bounding_box"
							},
							"horizontal_velocity": {
								"base": 0
							},
							"vertical_velocity": {
								"base": 0
							},
							"speed": 0.2
						},
						{
							"type": "minecraft:spawn_particles",
							"particle": {
								"type": "minecraft:trial_spawner_detection"
							},
							"horizontal_position": {
								"type": "in_bounding_box"
							},
							"vertical_position": {
								"type": "in_bounding_box"
							},
							"horizontal_velocity": {
								"base": 0
							},
							"vertical_velocity": {
								"base": 0
							},
							"speed": 0.2
						},
						{
							"type": "minecraft:spawn_particles",
							"particle": {
								"type": "minecraft:trial_spawner_detection"
							},
							"horizontal_position": {
								"type": "in_bounding_box"
							},
							"vertical_position": {
								"type": "in_bounding_box"
							},
							"horizontal_velocity": {
								"base": 0
							},
							"vertical_velocity": {
								"base": 0
							},
							"speed": 0.2
						},
						{
							"type": "minecraft:spawn_particles",
							"particle": {
								"type": "minecraft:trial_spawner_detection"
							},
							"horizontal_position": {
								"type": "in_bounding_box"
							},
							"vertical_position": {
								"type": "in_bounding_box"
							},
							"horizontal_velocity": {
								"base": 0
							},
							"vertical_velocity": {
								"base": 0
							},
							"speed": 0.2
						},
						{
							"type": "minecraft:spawn_particles",
							"particle": {
								"type": "minecraft:trial_spawner_detection"
							},
							"horizontal_position": {
								"type": "in_bounding_box"
							},
							"vertical_position": {
								"type": "in_bounding_box"
							},
							"horizontal_velocity": {
								"base": 0
							},
							"vertical_velocity": {
								"base": 0
							},
							"speed": 0.2
						},
						{
							"type": "minecraft:spawn_particles",
							"particle": {
								"type": "minecraft:trial_spawner_detection"
							},
							"horizontal_position": {
								"type": "in_bounding_box"
							},
							"vertical_position": {
								"type": "in_bounding_box"
							},
							"horizontal_velocity": {
								"base": 0
							},
							"vertical_velocity": {
								"base": 0
							},
							"speed": 0.2
						},
						{
							"type": "minecraft:spawn_particles",
							"particle": {
								"type": "minecraft:trial_spawner_detection"
							},
							"horizontal_position": {
								"type": "in_bounding_box"
							},
							"vertical_position": {
								"type": "in_bounding_box"
							},
							"horizontal_velocity": {
								"base": 0
							},
							"vertical_velocity": {
								"base": 0
							},
							"speed": 0.2
						},
						{
							"type": "minecraft:spawn_particles",
							"particle": {
								"type": "minecraft:trial_spawner_detection"
							},
							"horizontal_position": {
								"type": "in_bounding_box"
							},
							"vertical_position": {
								"type": "in_bounding_box"
							},
							"horizontal_velocity": {
								"base": 0
							},
							"vertical_velocity": {
								"base": 0
							},
							"speed": 0.2
						},
						{
							"type": "minecraft:spawn_particles",
							"particle": {
								"type": "minecraft:trial_spawner_detection"
							},
							"horizontal_position": {
								"type": "in_bounding_box"
							},
							"vertical_position": {
								"type": "in_bounding_box"
							},
							"horizontal_velocity": {
								"base": 0
							},
							"vertical_velocity": {
								"base": 0
							},
							"speed": 0.2
						}
					]
				},
				"requirements": {
					"condition": "minecraft:all_of",
					"terms": [
						{
							"condition": "minecraft:inverted",
							"term": {
								"condition": "minecraft:entity_properties",
								"entity": "this",
								"predicate": {
									"nbt": "{NoAI:1b}"
								}
							}
						},
						{
							"condition": "minecraft:inverted",
							"term": {
								"condition": "minecraft:entity_properties",
								"entity": "this",
								"predicate": {
									"type": "minecraft:player"
								}
							}
						},
						{
							"condition": "minecraft:inverted",
							"term": {
								"condition": "minecraft:entity_properties",
								"entity": "this",
								"predicate": {
									"type": "#kohara:invalid_targets"
								}
							}
						},
						{
							"condition": "minecraft:inverted",
							"term": {
								"condition": "minecraft:entity_properties",
								"entity": "this",
								"predicate": {
									"targeted_entity": {
										"type": "minecraft:player"
									}
								}
							}
						}
					]
				}
			},
			{
				"enchanted": "attacker",
				"affected": "victim",
				"effect": {
					"type": "minecraft:play_sound",
					"sound": {
						"sound_id": "stellarity:enchantment.ambush.level_1"
					},
					"volume": 0.75,
					"pitch": 1
				},
				"requirements": {
					"condition": "minecraft:all_of",
					"terms": [
						{
							"condition": "minecraft:all_of",
							"terms": [
								{
									"condition": "minecraft:inverted",
									"term": {
										"condition": "minecraft:entity_properties",
										"entity": "this",
										"predicate": {
											"nbt": "{NoAI:1b}"
										}
									}
								},
								{
									"condition": "minecraft:inverted",
									"term": {
										"condition": "minecraft:entity_properties",
										"entity": "this",
										"predicate": {
											"type": "minecraft:player"
										}
									}
								},
								{
									"condition": "minecraft:inverted",
									"term": {
										"condition": "minecraft:entity_properties",
										"entity": "this",
										"predicate": {
											"type": "#kohara:invalid_targets"
										}
									}
								},
								{
									"condition": "minecraft:inverted",
									"term": {
										"condition": "minecraft:entity_properties",
										"entity": "this",
										"predicate": {
											"targeted_entity": {
												"type": "minecraft:player"
											}
										}
									}
								}
							]
						},
						{
							"condition": "minecraft:value_check",
							"value": {
								"type": "minecraft:enchantment_level",
								"amount": {
									"type": "minecraft:linear",
									"base": 1,
									"per_level_above_first": 1
								}
							},
							"range": 1
						}
					]
				}
			},
			{
				"enchanted": "attacker",
				"affected": "victim",
				"effect": {
					"type": "minecraft:play_sound",
					"sound": {
						"sound_id": "stellarity:enchantment.ambush.level_2"
					},
					"volume": 0.75,
					"pitch": 1
				},
				"requirements": {
					"condition": "minecraft:all_of",
					"terms": [
						{
							"condition": "minecraft:all_of",
							"terms": [
								{
									"condition": "minecraft:inverted",
									"term": {
										"condition": "minecraft:entity_properties",
										"entity": "this",
										"predicate": {
											"nbt": "{NoAI:1b}"
										}
									}
								},
								{
									"condition": "minecraft:inverted",
									"term": {
										"condition": "minecraft:entity_properties",
										"entity": "this",
										"predicate": {
											"type": "minecraft:player"
										}
									}
								},
								{
									"condition": "minecraft:inverted",
									"term": {
										"condition": "minecraft:entity_properties",
										"entity": "this",
										"predicate": {
											"type": "#kohara:invalid_targets"
										}
									}
								},
								{
									"condition": "minecraft:inverted",
									"term": {
										"condition": "minecraft:entity_properties",
										"entity": "this",
										"predicate": {
											"targeted_entity": {
												"type": "minecraft:player"
											}
										}
									}
								}
							]
						},
						{
							"condition": "minecraft:value_check",
							"value": {
								"type": "minecraft:enchantment_level",
								"amount": {
									"type": "minecraft:linear",
									"base": 1,
									"per_level_above_first": 1
								}
							},
							"range": 2
						}
					]
				}
			},
			{
				"enchanted": "attacker",
				"affected": "victim",
				"effect": {
					"type": "minecraft:play_sound",
					"sound": {
						"sound_id": "stellarity:enchantment.ambush.level_3"
					},
					"volume": 0.75,
					"pitch": 1
				},
				"requirements": {
					"condition": "minecraft:all_of",
					"terms": [
						{
							"condition": "minecraft:all_of",
							"terms": [
								{
									"condition": "minecraft:inverted",
									"term": {
										"condition": "minecraft:entity_properties",
										"entity": "this",
										"predicate": {
											"nbt": "{NoAI:1b}"
										}
									}
								},
								{
									"condition": "minecraft:inverted",
									"term": {
										"condition": "minecraft:entity_properties",
										"entity": "this",
										"predicate": {
											"type": "minecraft:player"
										}
									}
								},
								{
									"condition": "minecraft:inverted",
									"term": {
										"condition": "minecraft:entity_properties",
										"entity": "this",
										"predicate": {
											"type": "#kohara:invalid_targets"
										}
									}
								},
								{
									"condition": "minecraft:inverted",
									"term": {
										"condition": "minecraft:entity_properties",
										"entity": "this",
										"predicate": {
											"targeted_entity": {
												"type": "minecraft:player"
											}
										}
									}
								}
							]
						},
						{
							"condition": "minecraft:value_check",
							"value": {
								"type": "minecraft:enchantment_level",
								"amount": {
									"type": "minecraft:linear",
									"base": 1,
									"per_level_above_first": 1
								}
							},
							"range": {
								"min": 3
							}
						}
					]
				}
			}
		]
	}
}
